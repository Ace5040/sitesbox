#!/bin/bash

if [ $# -eq 0 ]
then
  echo usage sitesbox-certbot /sites/site-name/web-root "-d example1.com -d example2.com ..."
else

  SCRIPT=`realpath $0`
  SCRIPTPATH=`dirname $SCRIPT`

  cd $SCRIPTPATH/..

  source .env

  docker run --rm --env-file=$(pwd)/.env \
    -v $SITES_PATH:/sites \
    -v $(pwd)/config/letsencrypt:/etc/letsencrypt \
    ace5040/utils:stable \
    certbot certonly --expand --webroot --webroot-path ${1} ${2}
fi
